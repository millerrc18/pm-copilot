<% content_for :page_title, "Programs" %>
<% content_for :page_subtitle, "A single source of truth for contracts, costs, and unit economics." %>
<% content_for :toolbar do %>
  <%= render "shared/ui/button", label: "New program", variant: "primary", url: new_program_path %>
<% end %>

<div class="glass-card">
  <div class="glass-card-body">
    <div class="programs-summary">
      <div>
        <%= render "shared/ui/chip", label: "Portfolio" %>
        <p class="card-meta programs-summary-text">Review program health, contracts, and activity in one place.</p>
      </div>
      <%= render "shared/ui/button", label: "Create program", variant: "ghost", url: new_program_path %>
    </div>
  </div>
</div>

<% if @programs.any? %>
  <div class="glass-card">
    <div class="glass-card-body">
      <table class="shell-table">
        <thead>
          <tr>
            <th>Program</th>
            <th>Customer</th>
            <th>Highlights</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <% @programs.each do |program| %>
            <tr>
              <td>
                <strong><%= link_to program.name, program %></strong><br>
                <span class="shell-subtitle">Updated just now</span>
              </td>
              <td><%= program.customer.presence || "â€”" %></td>
              <td class="shell-subtitle"><%= truncate(program.description.to_s, length: 80).presence || "No description yet." %></td>
              <td>
                <%= render "shared/ui/button", label: "View", variant: "ghost", url: program_path(program) %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
<% else %>
  <%= render "shared/ui/card", icon: "wand", title: "Create your first program", description: "Add a program to start tracking contracts, milestones, and delivery progress.", footer: render("shared/ui/button", label: "New program", variant: "primary", url: new_program_path) %>
<% end %>
